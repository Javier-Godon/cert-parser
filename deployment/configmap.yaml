apiVersion: v1
kind: ConfigMap
metadata:
  name: cert-parser-config
  namespace: cert-parser
  labels:
    app: cert-parser
data:
  # ── pydantic-settings uses "__" as nested delimiter ──────────
  # AUTH__URL maps to auth.url, DATABASE__HOST maps to database.host, etc.

  # ── OpenID Connect (Step 1: access token) ────────────────────
  AUTH__URL: "https://keycloak.example.com/realms/your-realm/protocol/openid-connect/token"
  AUTH__CLIENT_ID: "your-client-id"
  AUTH__USERNAME: "your-service-account-username"

  # ── SFC Login (Step 2: SFC token) ────────────────────────────
  LOGIN__URL: "https://api.example.com/auth/v1/login"
  LOGIN__BORDER_POST_ID: "1"
  LOGIN__BOX_ID: "1"
  LOGIN__PASSENGER_CONTROL_TYPE: "1"

  # ── Certificate Download (Step 3) ────────────────────────────
  DOWNLOAD__URL: "https://api.example.com/certificates/csca"

  # ── PostgreSQL (individual components, DATABASE__DSN in Secret overrides) ──
  DATABASE__HOST: "postgres.example.com"
  DATABASE__PORT: "5432"
  DATABASE__NAME: "cert_parser_db"
  DATABASE__USERNAME: "cert_parser"

  # ── HTTP client ───────────────────────────────────────────────
  HTTP_TIMEOUT_SECONDS: "60"

  # ── Scheduler (5-field cron: minute hour dom month dow) ───────
  # "0 */6 * * *" = every 6 hours (default)
  # "0 2 * * *"   = daily at 02:00
  SCHEDULER__CRON: "0 */6 * * *"

  # ── Application ───────────────────────────────────────────────
  RUN_ON_STARTUP: "false"
  LOG_LEVEL: "INFO"
